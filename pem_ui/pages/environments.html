<h1>Deployed Code Environments</h1>
<div id="accordion" role="tablist" aria-multiselectable="true">
  <div class="card" ng-repeat="(name,modules) in envs">
    <div class="card-header" role="tab" id="{{name}}header">
      <h5 class="mb-0">
        <a data-toggle="collapse"
           data-parent="#accordion"
           href="#collapse{{name}}"
           aria-expanded="false"
           aria-controls="collapse{{name}}">
          {{name}}
        </a>
      </h5>
    </div>

    <div id="collapse{{name}}" class="collapse show" role="tabpanel" aria-labelledby="{{name}}header">
      <div class="card-block">
        <table class="table table-striped">
          <thead>
            <tr>
              <th>Module</th>
              <th>Version</th>
            </tr>
          </thead>
          <tbody ng-repeat="(name, version) in modules">
            <tr>
              <td ng-if="$odd" style="background-color:#f1f1f1">{{ name }}</td>
              <td ng-if="$even">{{ name }}</td>
              <td ng-if="$odd" style="background-color:#f1f1f1">{{ version }}</td>
              <td ng-if="$even">{{ version }}</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  </div> <!-- end ng-repeat -->
</div>


<!---
{
  "test7": {
    "puppetlabs-concat": "4.1.1",
    "puppetlabs-ntp": "6.2.0",
    "ipcrm-registry_acl": "0.0.3",
    "myorg-teamx": "ced1b64"
  }
}

//>>$.ajax({
//    dataType: "json",
//    url: pemAPI + "/envs",
//    success: function(response){
//      $.each(response, function( env, modules){
//
//        var newCard = $('<div class="card">');
//
//        newCard
//          .append($('<div class="card-header" role="tab" id="' + env + 'header">')
//          .append($('<h5 class="mb-0">')
//>>        .append('<a data-toggle="collapse" href="#' + env + '" aria-expanded="true" aria-controls="' + env + '"> ' + env + ' </a>'
//        )));
//
//>>      var table = $('<table class="table table-striped">').append('<thead><tr><th>Module</th><th>Version</th></tr></thead>');
//        var tableBody = $('<tbody>');
//        $.each(modules, function(module, version){
//>>         tableBody.append('<tr><td>' + module + '</td><td>' + version +'</td></tr>');
//        });
//        table.append(tableBody);
//
//        newCard.append($('<div id="' + env + '" class="collapse" role="tabpanel" aria-labelledby="' + env +'header" data-parent="#accordion">')
//        .append('<div class="card-body">').append(table));
//
//        $('#environments').append(newCard);
//      });
//    }
//  });

-->
